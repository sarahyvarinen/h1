<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tehtävä h2</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f9;
      color: #333;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    main {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: #2c3e50;
      color: white;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Tehtävä h2</h1>
  </header>
  <main>
    <h1>x</h1>
    <p>a.Broken access control = Käyttäjä pääsee ohjelmassa esiintyneen vian/heikkouden kautta käsiksi tietoihin jotka eivät ole tarkoitettu hänen nähtävikseen.</p>
    <p>b.Fuff = työkalu, jonka avulla käyttäjä voi etsiä piilotettuja hakemistoja. Teksitssä viitattiin myös "fuzzaukseen".</p>
    <p> Se on keino pommittaa nettisivua isolla määrällä dataa, joka aiheuttaa todennäköisesti sen kaatumisen.</p>
    <p>c.Hyvään ja helppolukuiseen raporttiin on selkeästi merkattu tehtävän suoritusajat ja ympäristö.</p>
    <p>Tämä tapahtuu seuraten huolellisesti annettuja raportointi ohjeita ja pitäen kiinni siististä kirjoitusasusta.</p>
    
    <h2>Testaus ympäristö:</h2>
    <p>Käytin testaus ja työskentely ympäristönä omaa Windows läppäriäni, johon olen asentanut Virtual Boxiin Debianin.</p>
    <p>Debianin malli on 13.0, tutummin "Trixie". Trixien ympäristönä toimii "Xfce 4.20".</p>
    <p>Koneella on käytössä 20.0 gb levytilaa.</p>
    <p>Selaimena toimi Firefox.</p>
    
    <h3>a</h3>
    <p>Harjoituksessa avattiin web-lomake selaimessa, jossa kysyttiin PIN-koodia. </p> 
    <p>Lomake oli type="number", joten tekstiä ei voinut kirjoittaa.</p>
    <p>Käytin selaimen Inspector-työkalua ja kirjoitin suoraan "number" arvon tilalle "text". Sillä tavalla en kuitenkaan päässyt kovin pitkälle, joten tutkin annettua vihjettä sql injektiosta.</p>
    <p>Minulta meni melko pitkään kokeilla erilaisia yhdistelmiä, hyödyntäen Portswigger Academyn sekä Brightsecin lähteitä, sain aikaan lauseen "' UNION SELECT password FROM pins-- ". </p>
    <p>Laitoin tämän lauseen "value" arvoksi. Aikaa vei paljon se, etten tajunnut heti käyttää kahta viivaa lopussa. </p>
    <p>Lippu oli SUPERADMIN%rootALL-FLAG{Tero-e45f8764675e4463db969473b9b0fcdd}</p>

    <h4>b</h4>
    <p>Uskoisin, että vian voi korjata tekemällä koodista parametrisoidun.</p>
    <p>Tarkoittaen että arvot eivät tulisi suoraan käyttäjältä, vaan ne olisivat määriteltynä parametreina. </p>
    <img src="Näyttökuva 2025-09-01 082349.jpg" alt="Kuvaratkaisusta" width="300">

    <h5>c</h5>
    <p>Tämän tehtävän vastauksen löysin melko nopeasti, ikäänkuin vahingossa.</p>
    <p>Back end -ohjelmointi kurssilla sivuttiin muutaman kerran url-kentän muokkaamista ja sitä, kuinka huonosti suojatut sivut ovat alttiita tällaisille hyökkäyksille.</p>
    <p>Kokeilin ensin muuttaa url kenttää useammalla eri yhdistelmällä ja kirjautumatta. Se ei tuottanut tulosta, vaan pysähtyi aina kirjautumiseen.</p>
    <p>Päätin kokeilla luoda käyttäjän ja muokata sitten url kenttää, ajatellen että siinä ehkä toimisi Broken access control-tyyppinen lähestyminen.</p>
    <p>Kokeiltuani muutamaa, huomasin tällaisen mielenkiintoisen yksityiskohdan:</p>
    <img src="Näyttökuva 2025-09-01 090057.jpg" alt="Ratkaisu" width="300">
    <p>"admin-console" oli yksi niistä sivuista, joita django kokeili testaillessani eri url-osoitteita. Vaihdoin url:n sitten vain muotoon "127.0.0.1:8000/admin-console/.</p>
    <p>Vastauksena sain sivun:</p>
    <img src="Näyttökuva 2025-09-01 090431.jpg" alt="Ratkaisu" width="300">
    <p>Kyseessä on vain se, ettei sivun luoja ole määritellyt tai lisännyt mitään tarkistusta siitä, että admin sivun katselijalla on admin oikeudet.</p>
    <p>Toisin sanoen, broken access control.</p>

    <h6>c</h6>
    <p>Katseltuani lähdekoodia, löysin vian views.py:stä.</p>
    <img src="vika.png" alt="vika" width="300">
    <p>Kuten korostetusta osiosta näkyy, käyttäjän tarvitsi olla vain kirjautunut sisään.</p>
    <p>Korjataan:</p>
    <img src="korjattu.jpg" alt="korjattu" width="300">
    <p>Näin kuka tahansa ei voi katsella admin oikeuksien takana olevia tietoja. Hyvin pieni virhe, sen löytämiseen koodista meni enemmän aikaa kuin korjaamiseen, mutta se mielestäni osoittaa hyvin kuinka pienikin virhe voi aiheuttaa isoja ongelmia.</p>


    
    <h7>Lähteet</h5>
    <p>Portswigger "SQL injections and UNION attacks, https://portswigger.net/web-security/sql-injection/union-attacks</p>
    <p>Brightsec https://brightsec.com/blog/union-sql-injection/</p>
    <p>Kurssin nettisivut: https://terokarvinen.com/sovellusten-hakkerointi/</p>
    <p>Github lab artikkeli fuzz testauksesta: https://about.gitlab.com/topics/devsecops/what-is-fuzz-testing/</p>

  </main>
  
  
</body>
</html>
